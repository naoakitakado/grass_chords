
%aside.l-contents__top
  %section.l-contents__section.c-window__clear.p-chord__section
    .p-chord-new__title
      %h2 Chord Score Edit
      .p-chord-new__subtitle -コード譜を編集する-

=form_with url: chord_path, method: :patch, model: @chord, local: true do |f|
  %article.l-contents__main
    %section.c-window__skeleton
      .p-chord-new__song
        .c-song-candidate__wrapper

          .c-song-candidate__lists.c-window__clear-black.u-display__hidden           

      .content__search-result
      .p-chord-new__version.c-form__search-box
        .p-chord-new__version--form
          =f.text_field :version, placeholder: "コード譜の名前", class: "c-form__textbox"
        .p-chord-new__version--help.form__textbox
          %a version
    %section.p-chord__wrapper
      .p-chord__key-change
        .c-key-change__wrapper
          .c-key-change__display
            = f.text_field :key, id: "key_name", class: "key-display--form c-key-change__form u-display__hidden", value: "#{@chord.key}"
            .c-key-change__present
              - if ["B","b"].include?(@chord.key[1])
                = "key of "+ @chord.key[0]
                %a{class: "font_base-key c-font__base"}
                  = @chord.key[1]
              - else
                = "key of " + @chord.key 
          =render "/application/key-change"
        .c-key-change__guide << key change!!
        .c-key-change__close-layer
          .c-layer__skeleton
      .p-song__score.c-js__key-change.c-js__disable
        -48.times do |i|
          .c-chordunit.c-js__cursor-marker.c-chordunit--large{id: "unit_0-#{i}"}
            .c-chordunit__beat.c-chordunit__beat--large
              =@chord.chordunits[i].beat
            .c-chordunit__leftbar.c-chordunit__leftbar--large
              =@chord.chordunits[i].leftbar
            .c-chordunit__note
              .c-chordunit__note-name.c-chordunit__note-name--large
              .c-chordunit__half-note.c-chordunit__half-note--large
              .c-chordunit__modifier.c-chordunit__modifier--large
            .c-chordunit__rightbar.c-chordunit__rightbar--large
              =@chord.chordunits[i].rightbar

      =f.fields_for :chordunits do |unit_f|
        =unit_f.hidden_field :address
        =unit_f.hidden_field :text, class: "c-chordunit__text"
        =unit_f.hidden_field :leftbar
        =unit_f.hidden_field :rightbar
        =unit_f.hidden_field :beat
    .content__registration
      =f.submit "登録", class:"c-form__btn c-form__btn--registration"
    .p-chord-new__editor-btn
      >> Editor

        
.c-chord-edit__wrapper.c-window__clear-black.u-display__hidden
  .c-chord-edit__editor
    .c-chord-edit__sub
      .c-chord-edit__text-window
      .c-chord-edit__close
        ×
    .c-chord-edit__main
      .c-chord-edit__btn G
      .c-chord-edit__btn A
      .c-chord-edit__btn B
      .c-chord-edit__btn C
      .c-chord-edit__btn D
      .c-chord-edit__btn E
      .c-chord-edit__btn F
      .c-chord-edit__btn.c-font__base.c-font__size-base.c-font__size-half.c-js__chord-editor-duplication B
      .c-chord-edit__btn.c-font__base.c-font__size-base.c-font__size-half b
      .c-chord-edit__btn m
      .c-chord-edit__btn 7th
      .c-chord-edit__btn.c-font__base {
      .c-chord-edit__btn.c-font__base }
      .c-chord-edit__btn.c-font__base ' 
      .c-chord-edit__btn.c-font__base.c-js__chord-editor-duplication  '
      .c-chord-edit__btn.c-font__base.c-font__size-base @
      .c-chord-edit__btn.c-font__base.c-font__size-base $
      .c-chord-edit__btn.c-font__base.c-font__size-base #
      .c-chord-edit__btn.c-font__repeat ‘
      .c-chord-edit__btn.c-chord-edit__size-backspace BackSpace

   